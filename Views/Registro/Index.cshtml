@model CelexWebApp.Models.RegistroMV.RegistroViewModel

@{
    ViewData["Title"] = "Registro";
}

<!-- Enlace al archivo CSS en wwwroot -->
<link rel="stylesheet" href="~/css/registro.css" />

<canvas id="particleCanvas" style="position: fixed; top: 0; left: 0; z-index: -2;"></canvas>
<canvas id="geometricCanvas" style="position: fixed; top: 0; left: 0; z-index: -1;"></canvas>

<div class="registration-wrapper">
    <div class="header-animation">
        <h1 class="title">@ViewData["Title"]</h1>
    </div>
    <div class="welcome-box">
        <p class="subtitle">Bienvenido usuario nuevo, realiza un registro para poder acceder a las funciones completas que tenemos disponibles para ti</p>
    </div>
    <div class="registration-container">
        <div class="section registration-form">
            <h2 class="section-title">Crea tu cuenta</h2>
            <form method="post" asp-action="Registro" asp-controller="Registro">
                <div class="form-group">
                    <label for="rol">Seleccione su rol:</label>
                    <select asp-for="RolSeleccionado" class="form-control custom-select" id="RolSeleccionado"
                            asp-items="Model.Roles">
                        <option value="">Seleccione...</option>
                    </select>
                    <span asp-validation-for="RolSeleccionado" class="text-danger"></span>
                </div>

                <div class="role-form" data-role="Alumno" style="display:none;">
                    <h3 class="sub-section-title">Datos del Alumno</h3>
                    <div class="form-group">
                        <label asp-for="Alumno.Nombre">Nombre:</label>
                        <input asp-for="Alumno.Nombre" class="form-control" />
                        <span asp-validation-for="Alumno.Nombre" class="text-danger"></span>
                    </div>
                    <div class="form-group">
                        <label asp-for="Alumno.ApellidoPaterno">Apellido Paterno:</label>
                        <input asp-for="Alumno.ApellidoPaterno" class="form-control" />
                        <span asp-validation-for="Alumno.ApellidoPaterno" class="text-danger"></span>
                    </div>
                    <div class="form-group">
                        <label asp-for="Alumno.ApellidoMaterno">Apellido Materno:</label>
                        <input asp-for="Alumno.ApellidoMaterno" class="form-control" />
                        <span asp-validation-for="Alumno.ApellidoMaterno" class="text-danger"></span>
                    </div>
                    <div class="form-group">
                        <label asp-for="Alumno.Telefono">Teléfono:</label>
                        <input asp-for="Alumno.Telefono" class="form-control" />
                        <span asp-validation-for="Alumno.Telefono" class="text-danger"></span>
                    </div>
                    <div class="form-group">
                        <label asp-for="Alumno.Matricula">Matrícula:</label>
                        <input asp-for="Alumno.Matricula" class="form-control" />
                        <span asp-validation-for="Alumno.Matricula" class="text-danger"></span>
                    </div>
                </div>

                <div class="form-group button-group">
                    <button type="submit" class="btn btn-primary">Registrarse</button>
                </div>
            </form>
        </div>

        <div class="section id-section">
            <h2 class="section-title">Verificación Profesional</h2>
            <p class="id-message">¿Eres docente o parte de nuestro equipo? Envíanos tu ID para validar tu cuenta.</p>
            <form asp-controller="Registro" asp-action="EnviarID" method="post">
                <div class="form-group button-group">
                    <button id="BtnAzureLabel" type="submit" class="btn btn-primary">Enviar ID</button>
                </div>
            </form>
            <div class="form-group">
                <label id="idAzureLabel" class="id-label">Número de Cuenta: @ViewData["id_azure"]</label>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
    <script>
        document.getElementById("RolSeleccionado").addEventListener("change", function () {
            const selectedRole = this.value;
            document.querySelectorAll(".role-form").forEach(form => {
                if (form.dataset.role === selectedRole) {
                    form.style.display = "block";
                    form.querySelectorAll("input, select").forEach(el => el.disabled = false);
                } else {
                    form.style.display = "none";
                    form.querySelectorAll("input, select").forEach(el => el.disabled = true);
                }
            });
        });
    </script>
}
